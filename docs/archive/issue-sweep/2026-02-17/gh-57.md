# GH-57 Candle 데이터 벌크 인서트 성능 최적화

- URL: https://github.com/Cha-Ji/pocket-chrome-extension/issues/57
- Decision: CLOSE
- Evidence (현재 main 기준):
  - 관련 커밋/PR:
    - 6944222: [-][db] candles 테이블 PK를 복합키로 변경, bulkPut upsert 최적화
    - PR #91 (Cha-Ji/claude/optimize-indexeddb-candles-7VZqZ) 머지 완료
  - 관련 파일:
    - src/lib/db/index.ts: CandleRepository.bulkAdd()가 bulkPut() 사용
    - src/lib/db/db-perf.test.ts: 벌크 인서트 성능 테스트 25개
    - src/background/handlers/candle-handlers.ts: handleCandleHistoryChunk()에서 bulkAdd 활용
  - 재현/비재현 근거:
    - bulkPut() 기반 배치 upsert 구현 완료
    - 복합키 [ticker+interval+timestamp]로 스키마 마이그레이션 (v7→v8→v9)
    - 배치 내 중복 제거 (Map 기반 dedup)
    - bulkGet()으로 O(batch) 존재 확인 (기존 O(table) 대비 개선)
    - 성능 테스트 500건 배치 통과
    - 이슈는 이미 closed 상태
- Changes in this PR:
  - docs/issue-sweep/2026-02-17/gh-57.md 감사 문서 추가
- Tests:
  - npx vitest run — 전체 테스트 통과 확인
- Follow-ups:
  - 없음 (완전 해결)
