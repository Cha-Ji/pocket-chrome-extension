# GH-52 Demo Mode 안전 체크 강화

- URL: https://github.com/Cha-Ji/pocket-chrome-extension/issues/52
- Decision: UPDATE
- Evidence (현재 main 기준):
  - 관련 커밋/PR:
    - PocketOptionSafetyGuard 클래스 구현 (src/lib/platform/adapters/pocket-option/safety.ts)
    - safety.test.ts 테스트 추가
  - 관련 파일:
    - src/lib/types/index.ts: isDemoMode() 3중 DOM 체크, getAccountType() 구현
    - src/lib/platform/adapters/pocket-option/safety.ts: 주기적 검증(5초), onAccountTypeChange 콜백
    - src/lib/platform/adapters/pocket-option/index.ts: adapter 초기화 시 startWatching() 호출
    - src/lib/trading/auto-trader.ts: isHalted/haltReason 존재하나 계정 타입 변경과 미연결
  - 재현/비재현 근거:
    - 요구사항 1 (WebSocket 기반 계정 검증): ❌ 미구현 — DOM 기반만 존재
    - 요구사항 2 (체크 실패 시 자동 거래 중지): ⚠️ 부분 — halt 메커니즘 있으나 계정 타입 변경과 미연결
    - 요구사항 3 (30초 주기 재검증): ⚠️ 부분 — 5초 주기로 구현됨 (30초 아닌 5초)
    - 요구사항 4 (검증 결과 로깅): ⚠️ 부분 — 최소한의 로깅만
- Changes in this PR:
  - docs/issue-sweep/2026-02-17/gh-52.md 감사 문서 추가
  - 이슈 스코프 갱신 제안: 구현된 부분(~50%)과 미구현 부분 명확화
- Tests:
  - N/A (문서 변경만)
- Follow-ups:
  - WebSocket 메시지에서 계정 타입 파싱 로직 추가 (websocket-parser.ts)
  - onAccountTypeChange → autoTrader.haltTrading() 연결
  - 검증 결과 상세 로깅 + Telegram 알림 연동
  - 이슈 본문에 구현 현황 체크리스트 갱신 필요
